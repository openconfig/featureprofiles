---
name: New featureprofiles test requirement
about: Use this template to document the requirements for a new test to be implemented.
title: ''
labels: enhancement
assignees: ''
---

# Instructions for this template

Below is the required template for writing test requirements.  Good examples of
test requirements include:

* [TE-18.1 gRIBI MPLS in UDP Encapsulation and
  Decapsulation](https://github.com/openconfig/featureprofiles/blob/main/feature/gribi/otg_tests/mpls_in_udp/README.md)
* [TE-3.7: Base Hierarchical NHG
  Update](/feature/gribi/otg_tests/base_hierarchical_nhg_update/README.md)
  * [PF-1.14 - MPLSoGRE IPV4 encapsulation of IPV4/IPV6 payload](https://github.com/openconfig/featureprofiles/blob/61d11a47d37fac58b311f57e8c2b619dc7fb264b/feature/policy_forwarding/otg_tests/mpls_gre_ipv4_encap_test/README.md)
* [gNMI-1.13: Telemetry: Optics Power and Bias
  Current](https://github.com/openconfig/featureprofiles/blob/main/feature/platform/tests/optics_power_and_bias_current_test/README.md)

# TestID-x.y: Short name of test here

## Summary

Write a few sentences or paragraphs describing the purpose and scope of the
test.

## Testbed type

* Specify the .testbed topology file from the
  [topologies](https://github.com/openconfig/featureprofiles/tree/main/topologies)
  folder to be used with this test

## Procedure

### Test environment setup

* Description of procedure to configure ATE and DUT with pre-requisites making
  it possible to cover the intended paths and RPCs.

### TestID-x.y.1 - Name of subtest 1

The following steps are typically present in each subtest.

* Step 1 - Generate DUT configuration

Replace this JSON formatted content with the "Canonical OC" that is expected to
be generated by the subtest. This configuration should be in JSON format.

NOTE: If the test requires configuration or state which are not defined in the
[public OC data models]([url](https://github.com/openconfig/public)), then new OC
paths must be proposed in this README.  A "TODO" comment must be provided linking
to a pull request to add these paths to the public OC models repository.  The
README may be approved and merged before the TODO item(s) are resolved.  

```json
{
  "openconfig-qos": {
    "interfaces": [
      {
        "config": {
          "interface-id": "PortChannel1.100"
        },
        "input": {
          "classifiers": [
            {
              "classifier": "dest_A",
              "config": {
                "name": "dest_A",
                "type": "IPV4"
              }
            }
          ],
          "scheduler-policy": {
            "config": {
              "name": "limit_group_A_1Gb",
              "new-leaf": "my_new_value"     # TODO https://github.com/openconfig/public/pull/1234
            }
          }
        },
        "interface": "PortChannel1.100"
      },
    ]
  }
}
```

* Step 2 - Push configuration to DUT using gnmi.Set with REPLACE option
* Step 3 - Send Traffic
* Step 4 - Validation with pass/fail criteria

### TestID-x.y.2 - Name of subtest 2

Repeat the format of the first subtest for each additional subtest defined.

## OpenConfig Path and RPC Coverage

This yaml stanza defines the OC paths intended to be covered by this test.  OC
paths used for test environment setup are not required to be listed here. This
content is parsed by automation to derive the test coverage.  If any new OC
paths are required, they should also be included here as a TODO comment.

```yaml
paths:
  # interface configuration
  /interfaces/interface/config/description:
  /interfaces/interface/config/enabled:
  # name of chassis and linecard components
  /components/component/state/name:
    platform_type: ["CHASSIS", "LINECARD"]
  # TODO: Add next-hop-group paths, see [public#1234](https://github.com/openconfig/public/pull/1234)
  # /network-instances/network-instance/static/next-hop-groups/next-hop-group/config/name
  # /network-instances/network-instance/protocols/protocol/static-routes/static/next-hops/next-hop/config/next-hop

rpcs:
  gnmi:
    gNMI.Set:
      union_replace: true
    gNMI.Subscribe:
      on_change: true
```

## Required DUT platform

* Specify the minimum DUT-type:
  * MFF - A modular form factor device containing LINECARDs, FABRIC and
    redundant CONTROLLER_CARD components
  * FFF - fixed form factor
  * vRX - virtual router device
